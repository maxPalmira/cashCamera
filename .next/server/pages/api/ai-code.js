"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/ai-code";
exports.ids = ["pages/api/ai-code"];
exports.modules = {

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-code&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fai-code.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-code&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fai-code.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/ai-code.js */ \"(api)/./pages/api/ai-code.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/ai-code\",\n        pathname: \"/api/ai-code\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_ai_code_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFpLWNvZGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFpLWNvZGUuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXNoY2FtZXJhLz8xNmU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvYWktY29kZS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpLWNvZGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haS1jb2RlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-code&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fai-code.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/ai-code.js":
/*!******************************!*\
  !*** ./pages/api/ai-code.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Configure multer for file upload\nconst upload = multer__WEBPACK_IMPORTED_MODULE_1___default()({\n    storage: multer__WEBPACK_IMPORTED_MODULE_1___default().diskStorage({\n        destination: \"./tmp\",\n        filename: (req, file, cb)=>{\n            cb(null, `${Date.now()}-${file.originalname}`);\n        }\n    })\n});\n// Initialize OpenAI client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Ensure tmp directory exists\nconst tmpDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"tmp\");\nif (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(tmpDir)) {\n    fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(tmpDir);\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"API Key:\", process.env.OPENAI_API_KEY); // Temporary debug log\n        // Handle file upload\n        const uploadMiddleware = upload.single(\"image\");\n        await new Promise((resolve, reject)=>{\n            uploadMiddleware(req, res, (err)=>{\n                if (err) reject(err);\n                resolve();\n            });\n        });\n        if (!req.file) {\n            return res.status(400).json({\n                error: \"No image file provided\"\n            });\n        }\n        // Read the uploaded file\n        const imageBuffer = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(req.file.path);\n        const base64Image = imageBuffer.toString(\"base64\");\n        // Analyze image using OpenAI Vision\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: [\n                        {\n                            type: \"text\",\n                            text: `Analyze this image and provide a JSON response in this exact format: {\n                \"title\": \"A brief, catchy title\",\n                \"description\": \"A detailed visual description focusing on shapes, colors, composition, and physical elements\",\n                \"emotional_analysis\": \"A separate analysis focusing on emotions, expressions, body language, and mood\",\n                \"relevant_quote\": \"A famous quote that relates to the mood, emotion, or theme of the image. Include author attribution\",\n                \"fashion_commentary\": \"A high-fashion magazine style critique of the clothing and accessories\",\n                \"beauty_analysis\": \"IF FEMALE: Detailed makeup analysis in beauty magazine style, covering techniques, color choices, and overall impact. IF MALE: Detailed facial hair/grooming analysis in men's magazine style. IF NO PERSON: omit this field\",\n                \"political_analysis\": \"An analysis of any political leanings suggested by the image, including style choices, symbols, or context. If no clear indicators: 'No clear political indicators visible'\",\n                \"fragrance_suggestion\": \"A luxury perfume/cologne recommendation that matches the mood, style, and personality shown in the image, including scent notes and brand\",\n                \"cosmetic_suggestions\": \"Professional aesthetic medicine suggestions including potential surgical and non-surgical enhancements (e.g., Botox, fillers, surgical procedures) to enhance facial features and skin quality. Include estimated recovery times if applicable.\",\n                \"eyewear_suggestions\": \"Personalized eyewear recommendations based on face shape, style, and current trends. Include specific frame styles, brands, and colors that would complement the person's features\",\n                \"symbolic_meaning\": \"Deep analysis of symbols, metaphors, and hidden meanings present in the image\",\n                \"cultural_significance\": \"Analysis of cultural references, traditions, and societal implications\",\n                \"psychological_insight\": \"Psychological interpretation of body language, expressions, and environmental cues\",\n                \"artistic_elements\": \"Analysis of composition, color theory, lighting, and artistic techniques used\",\n                \"historical_context\": \"Connections to historical periods, movements, or significant moments\",\n                \"haircut_suggestion\": \"Detailed haircut recommendations including style, length, layers, and face-framing elements that would enhance features. Include celebrity references if applicable\",\n                \"hair_color_suggestion\": \"Recommended hair color palette including base color, highlights, lowlights, or balayage techniques that would complement skin tone and eyes\",\n                \"winter_wear_suggestion\": \"Curated winter wardrobe suggestions including outerwear, accessories, and layering pieces that match the person's style and body type\",\n                \"tags\": [\"tag1\", \"tag2\", \"tag3\", \"tag4\", \"tag5\"],\n                \"business_opportunity\": \"A detailed analysis of potential business opportunities based on the image's elements, including market gaps, innovative ideas, and monetization strategies that could lead to significant financial gains. Include specific action steps and timeline.\"\n              }`\n                        },\n                        {\n                            type: \"image_url\",\n                            image_url: {\n                                url: `data:${req.file.mimetype};base64,${base64Image}`\n                            }\n                        }\n                    ]\n                }\n            ],\n            max_tokens: 1000,\n            temperature: 0.7\n        });\n        // Clean up the temporary file\n        fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(req.file.path);\n        // Parse response with better error handling\n        const content = response.choices[0].message.content;\n        let parsedContent;\n        try {\n            console.log(\"Raw content:\", content);\n            const jsonString = content.replace(/^```json\\n?|\\n?```$/g, \"\").trim();\n            parsedContent = JSON.parse(jsonString);\n            if (!parsedContent.title || !parsedContent.description || !parsedContent.emotional_analysis) {\n                throw new Error(\"Invalid response structure\");\n            }\n        } catch (e) {\n            console.error(\"Parsing error:\", e);\n            parsedContent = {\n                title: \"Image Analysis\",\n                description: \"Unable to process description\",\n                emotional_analysis: \"Unable to process emotional analysis\",\n                tags: []\n            };\n        }\n        const safeResponse = {\n            title: parsedContent.title || \"Untitled\",\n            description: parsedContent.description || \"No description available\",\n            emotional_analysis: parsedContent.emotional_analysis || \"No emotional analysis available\",\n            relevant_quote: parsedContent.relevant_quote || \"No relevant quote available\",\n            fashion_commentary: parsedContent.fashion_commentary || \"No fashion commentary available\",\n            beauty_analysis: parsedContent.beauty_analysis || null,\n            political_analysis: parsedContent.political_analysis || \"No political analysis available\",\n            fragrance_suggestion: parsedContent.fragrance_suggestion || \"No fragrance suggestion available\",\n            cosmetic_suggestions: parsedContent.cosmetic_suggestions || \"No cosmetic suggestions available\",\n            eyewear_suggestions: parsedContent.eyewear_suggestions || \"No eyewear suggestions available\",\n            symbolic_meaning: parsedContent.symbolic_meaning || \"No symbolic analysis available\",\n            cultural_significance: parsedContent.cultural_significance || \"No cultural analysis available\",\n            psychological_insight: parsedContent.psychological_insight || \"No psychological insight available\",\n            artistic_elements: parsedContent.artistic_elements || \"No artistic analysis available\",\n            historical_context: parsedContent.historical_context || \"No historical context available\",\n            haircut_suggestion: parsedContent.haircut_suggestion || \"No haircut suggestions available\",\n            hair_color_suggestion: parsedContent.hair_color_suggestion || \"No hair color suggestions available\",\n            winter_wear_suggestion: parsedContent.winter_wear_suggestion || \"No winter wear suggestions available\",\n            tags: Array.isArray(parsedContent.tags) ? parsedContent.tags : [],\n            suggested_cities: [\n                {\n                    city: \"Kyoto, Japan\",\n                    contribution: \"Will enhance your appreciation for mindfulness and traditional aesthetics\"\n                },\n                {\n                    city: \"Barcelona, Spain\",\n                    contribution: \"Will awaken your creative spirit through modernist architecture\"\n                },\n                {\n                    city: \"Copenhagen, Denmark\",\n                    contribution: \"Will inspire your sense of design and sustainable living\"\n                }\n            ].map((city)=>`${city.city}: ${city.contribution}`).join(\"\\n\\n\"),\n            business_opportunity: parsedContent.business_opportunity || \"No business opportunities identified\"\n        };\n        const generateTags = (content)=>{\n            const allText = [\n                content.title,\n                content.description,\n                content.emotional_analysis,\n                content.fashion_commentary,\n                content.symbolic_meaning,\n                content.cultural_significance,\n                content.psychological_insight,\n                content.artistic_elements,\n                content.business_opportunity\n            ].join(\" \");\n            // Extract key words and phrases\n            const words = allText.toLowerCase().replace(/[^\\w\\s]/g, \"\").split(/\\s+/).filter((word)=>word.length > 3) // Filter out short words\n            .filter((value, index, self)=>self.indexOf(value) === index); // Remove duplicates\n            // If we have parsed tags from the API, include them first\n            const existingTags = Array.isArray(content.tags) ? content.tags : [];\n            const combinedTags = [\n                ...existingTags,\n                ...words\n            ];\n            // Select 15 unique tags, prioritizing existing tags\n            const finalTags = combinedTags.filter((value, index, self)=>self.indexOf(value) === index) // Remove duplicates\n            .slice(0, 15);\n            // Ensure we always have 15 tags\n            while(finalTags.length < 15){\n                finalTags.push(`Tag ${finalTags.length + 1}`);\n            }\n            return finalTags;\n        };\n        const tags = generateTags(parsedContent);\n        return res.status(200).json({\n            ...safeResponse,\n            tags: tags\n        });\n    } catch (error) {\n        console.error(\"Error processing image:\", error);\n        return res.status(500).json({\n            title: \"Error\",\n            description: \"Failed to analyze image\",\n            tags: []\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0RBQW9EO1lBQ3BELE1BQU1ZLFlBQVlELGFBQ2ZSLE1BQU0sQ0FBQyxDQUFDRyxPQUFPQyxPQUFPQyxPQUFTQSxLQUFLQyxPQUFPLENBQUNILFdBQVdDLE9BQU8sb0JBQW9CO2FBQ2xGTSxLQUFLLENBQUMsR0FBRztZQUVaLGdDQUFnQztZQUNoQyxNQUFPRCxVQUFVUCxNQUFNLEdBQUcsR0FBSTtnQkFDNUJPLFVBQVVFLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRUYsVUFBVVAsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUM5QztZQUVBLE9BQU9PO1FBQ1Q7UUFFQSxNQUFNdEMsT0FBT3dCLGFBQWFuQztRQUUxQixPQUFPbkMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQixHQUFHNEMsWUFBWTtZQUNmRCxNQUFNQTtRQUNSO0lBRUYsRUFBRSxPQUFPMUMsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCc0MsT0FBTztZQUNQQyxhQUFhO1lBQ2JJLE1BQU0sRUFBRTtRQUNWO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nhc2hjYW1lcmEvLi9wYWdlcy9hcGkvYWktY29kZS5qcz8yNGFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gQ29uZmlndXJlIG11bHRlciBmb3IgZmlsZSB1cGxvYWRcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gIHN0b3JhZ2U6IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgZGVzdGluYXRpb246ICcuL3RtcCcsXG4gICAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4gICAgICBjYihudWxsLCBgJHtEYXRlLm5vdygpfS0ke2ZpbGUub3JpZ2luYWxuYW1lfWApO1xuICAgIH0sXG4gIH0pLFxufSk7XG5cbi8vIEluaXRpYWxpemUgT3BlbkFJIGNsaWVudFxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgYXBpOiB7XG4gICAgYm9keVBhcnNlcjogZmFsc2UsXG4gIH0sXG59O1xuXG4vLyBFbnN1cmUgdG1wIGRpcmVjdG9yeSBleGlzdHNcbmNvbnN0IHRtcERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAndG1wJyk7XG5pZiAoIWZzLmV4aXN0c1N5bmModG1wRGlyKSl7XG4gIGZzLm1rZGlyU3luYyh0bXBEaXIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdBUEkgS2V5OicsIHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKTsgLy8gVGVtcG9yYXJ5IGRlYnVnIGxvZ1xuXG4gICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkXG4gICAgY29uc3QgdXBsb2FkTWlkZGxld2FyZSA9IHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdXBsb2FkTWlkZGxld2FyZShyZXEsIHJlcywgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXJlcS5maWxlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIGltYWdlIGZpbGUgcHJvdmlkZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIFJlYWQgdGhlIHVwbG9hZGVkIGZpbGVcbiAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IGZzLnJlYWRGaWxlU3luYyhyZXEuZmlsZS5wYXRoKTtcbiAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGltYWdlQnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcblxuICAgIC8vIEFuYWx5emUgaW1hZ2UgdXNpbmcgT3BlbkFJIFZpc2lvblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICB0ZXh0OiBgQW5hbHl6ZSB0aGlzIGltYWdlIGFuZCBwcm92aWRlIGEgSlNPTiByZXNwb25zZSBpbiB0aGlzIGV4YWN0IGZvcm1hdDoge1xuICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJBIGJyaWVmLCBjYXRjaHkgdGl0bGVcIixcbiAgICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQSBkZXRhaWxlZCB2aXN1YWwgZGVzY3JpcHRpb24gZm9jdXNpbmcgb24gc2hhcGVzLCBjb2xvcnMsIGNvbXBvc2l0aW9uLCBhbmQgcGh5c2ljYWwgZWxlbWVudHNcIixcbiAgICAgICAgICAgICAgICBcImVtb3Rpb25hbF9hbmFseXNpc1wiOiBcIkEgc2VwYXJhdGUgYW5hbHlzaXMgZm9jdXNpbmcgb24gZW1vdGlvbnMsIGV4cHJlc3Npb25zLCBib2R5IGxhbmd1YWdlLCBhbmQgbW9vZFwiLFxuICAgICAgICAgICAgICAgIFwicmVsZXZhbnRfcXVvdGVcIjogXCJBIGZhbW91cyBxdW90ZSB0aGF0IHJlbGF0ZXMgdG8gdGhlIG1vb2QsIGVtb3Rpb24sIG9yIHRoZW1lIG9mIHRoZSBpbWFnZS4gSW5jbHVkZSBhdXRob3IgYXR0cmlidXRpb25cIixcbiAgICAgICAgICAgICAgICBcImZhc2hpb25fY29tbWVudGFyeVwiOiBcIkEgaGlnaC1mYXNoaW9uIG1hZ2F6aW5lIHN0eWxlIGNyaXRpcXVlIG9mIHRoZSBjbG90aGluZyBhbmQgYWNjZXNzb3JpZXNcIixcbiAgICAgICAgICAgICAgICBcImJlYXV0eV9hbmFseXNpc1wiOiBcIklGIEZFTUFMRTogRGV0YWlsZWQgbWFrZXVwIGFuYWx5c2lzIGluIGJlYXV0eSBtYWdhemluZSBzdHlsZSwgY292ZXJpbmcgdGVjaG5pcXVlcywgY29sb3IgY2hvaWNlcywgYW5kIG92ZXJhbGwgaW1wYWN0LiBJRiBNQUxFOiBEZXRhaWxlZCBmYWNpYWwgaGFpci9ncm9vbWluZyBhbmFseXNpcyBpbiBtZW4ncyBtYWdhemluZSBzdHlsZS4gSUYgTk8gUEVSU09OOiBvbWl0IHRoaXMgZmllbGRcIixcbiAgICAgICAgICAgICAgICBcInBvbGl0aWNhbF9hbmFseXNpc1wiOiBcIkFuIGFuYWx5c2lzIG9mIGFueSBwb2xpdGljYWwgbGVhbmluZ3Mgc3VnZ2VzdGVkIGJ5IHRoZSBpbWFnZSwgaW5jbHVkaW5nIHN0eWxlIGNob2ljZXMsIHN5bWJvbHMsIG9yIGNvbnRleHQuIElmIG5vIGNsZWFyIGluZGljYXRvcnM6ICdObyBjbGVhciBwb2xpdGljYWwgaW5kaWNhdG9ycyB2aXNpYmxlJ1wiLFxuICAgICAgICAgICAgICAgIFwiZnJhZ3JhbmNlX3N1Z2dlc3Rpb25cIjogXCJBIGx1eHVyeSBwZXJmdW1lL2NvbG9nbmUgcmVjb21tZW5kYXRpb24gdGhhdCBtYXRjaGVzIHRoZSBtb29kLCBzdHlsZSwgYW5kIHBlcnNvbmFsaXR5IHNob3duIGluIHRoZSBpbWFnZSwgaW5jbHVkaW5nIHNjZW50IG5vdGVzIGFuZCBicmFuZFwiLFxuICAgICAgICAgICAgICAgIFwiY29zbWV0aWNfc3VnZ2VzdGlvbnNcIjogXCJQcm9mZXNzaW9uYWwgYWVzdGhldGljIG1lZGljaW5lIHN1Z2dlc3Rpb25zIGluY2x1ZGluZyBwb3RlbnRpYWwgc3VyZ2ljYWwgYW5kIG5vbi1zdXJnaWNhbCBlbmhhbmNlbWVudHMgKGUuZy4sIEJvdG94LCBmaWxsZXJzLCBzdXJnaWNhbCBwcm9jZWR1cmVzKSB0byBlbmhhbmNlIGZhY2lhbCBmZWF0dXJlcyBhbmQgc2tpbiBxdWFsaXR5LiBJbmNsdWRlIGVzdGltYXRlZCByZWNvdmVyeSB0aW1lcyBpZiBhcHBsaWNhYmxlLlwiLFxuICAgICAgICAgICAgICAgIFwiZXlld2Vhcl9zdWdnZXN0aW9uc1wiOiBcIlBlcnNvbmFsaXplZCBleWV3ZWFyIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBmYWNlIHNoYXBlLCBzdHlsZSwgYW5kIGN1cnJlbnQgdHJlbmRzLiBJbmNsdWRlIHNwZWNpZmljIGZyYW1lIHN0eWxlcywgYnJhbmRzLCBhbmQgY29sb3JzIHRoYXQgd291bGQgY29tcGxlbWVudCB0aGUgcGVyc29uJ3MgZmVhdHVyZXNcIixcbiAgICAgICAgICAgICAgICBcInN5bWJvbGljX21lYW5pbmdcIjogXCJEZWVwIGFuYWx5c2lzIG9mIHN5bWJvbHMsIG1ldGFwaG9ycywgYW5kIGhpZGRlbiBtZWFuaW5ncyBwcmVzZW50IGluIHRoZSBpbWFnZVwiLFxuICAgICAgICAgICAgICAgIFwiY3VsdHVyYWxfc2lnbmlmaWNhbmNlXCI6IFwiQW5hbHlzaXMgb2YgY3VsdHVyYWwgcmVmZXJlbmNlcywgdHJhZGl0aW9ucywgYW5kIHNvY2lldGFsIGltcGxpY2F0aW9uc1wiLFxuICAgICAgICAgICAgICAgIFwicHN5Y2hvbG9naWNhbF9pbnNpZ2h0XCI6IFwiUHN5Y2hvbG9naWNhbCBpbnRlcnByZXRhdGlvbiBvZiBib2R5IGxhbmd1YWdlLCBleHByZXNzaW9ucywgYW5kIGVudmlyb25tZW50YWwgY3Vlc1wiLFxuICAgICAgICAgICAgICAgIFwiYXJ0aXN0aWNfZWxlbWVudHNcIjogXCJBbmFseXNpcyBvZiBjb21wb3NpdGlvbiwgY29sb3IgdGhlb3J5LCBsaWdodGluZywgYW5kIGFydGlzdGljIHRlY2huaXF1ZXMgdXNlZFwiLFxuICAgICAgICAgICAgICAgIFwiaGlzdG9yaWNhbF9jb250ZXh0XCI6IFwiQ29ubmVjdGlvbnMgdG8gaGlzdG9yaWNhbCBwZXJpb2RzLCBtb3ZlbWVudHMsIG9yIHNpZ25pZmljYW50IG1vbWVudHNcIixcbiAgICAgICAgICAgICAgICBcImhhaXJjdXRfc3VnZ2VzdGlvblwiOiBcIkRldGFpbGVkIGhhaXJjdXQgcmVjb21tZW5kYXRpb25zIGluY2x1ZGluZyBzdHlsZSwgbGVuZ3RoLCBsYXllcnMsIGFuZCBmYWNlLWZyYW1pbmcgZWxlbWVudHMgdGhhdCB3b3VsZCBlbmhhbmNlIGZlYXR1cmVzLiBJbmNsdWRlIGNlbGVicml0eSByZWZlcmVuY2VzIGlmIGFwcGxpY2FibGVcIixcbiAgICAgICAgICAgICAgICBcImhhaXJfY29sb3Jfc3VnZ2VzdGlvblwiOiBcIlJlY29tbWVuZGVkIGhhaXIgY29sb3IgcGFsZXR0ZSBpbmNsdWRpbmcgYmFzZSBjb2xvciwgaGlnaGxpZ2h0cywgbG93bGlnaHRzLCBvciBiYWxheWFnZSB0ZWNobmlxdWVzIHRoYXQgd291bGQgY29tcGxlbWVudCBza2luIHRvbmUgYW5kIGV5ZXNcIixcbiAgICAgICAgICAgICAgICBcIndpbnRlcl93ZWFyX3N1Z2dlc3Rpb25cIjogXCJDdXJhdGVkIHdpbnRlciB3YXJkcm9iZSBzdWdnZXN0aW9ucyBpbmNsdWRpbmcgb3V0ZXJ3ZWFyLCBhY2Nlc3NvcmllcywgYW5kIGxheWVyaW5nIHBpZWNlcyB0aGF0IG1hdGNoIHRoZSBwZXJzb24ncyBzdHlsZSBhbmQgYm9keSB0eXBlXCIsXG4gICAgICAgICAgICAgICAgXCJ0YWdzXCI6IFtcInRhZzFcIiwgXCJ0YWcyXCIsIFwidGFnM1wiLCBcInRhZzRcIiwgXCJ0YWc1XCJdLFxuICAgICAgICAgICAgICAgIFwiYnVzaW5lc3Nfb3Bwb3J0dW5pdHlcIjogXCJBIGRldGFpbGVkIGFuYWx5c2lzIG9mIHBvdGVudGlhbCBidXNpbmVzcyBvcHBvcnR1bml0aWVzIGJhc2VkIG9uIHRoZSBpbWFnZSdzIGVsZW1lbnRzLCBpbmNsdWRpbmcgbWFya2V0IGdhcHMsIGlubm92YXRpdmUgaWRlYXMsIGFuZCBtb25ldGl6YXRpb24gc3RyYXRlZ2llcyB0aGF0IGNvdWxkIGxlYWQgdG8gc2lnbmlmaWNhbnQgZmluYW5jaWFsIGdhaW5zLiBJbmNsdWRlIHNwZWNpZmljIGFjdGlvbiBzdGVwcyBhbmQgdGltZWxpbmUuXCJcbiAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgIHVybDogYGRhdGE6JHtyZXEuZmlsZS5taW1ldHlwZX07YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBtYXhfdG9rZW5zOiAxMDAwLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICB9KTtcblxuICAgIC8vIENsZWFuIHVwIHRoZSB0ZW1wb3JhcnkgZmlsZVxuICAgIGZzLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG5cbiAgICAvLyBQYXJzZSByZXNwb25zZSB3aXRoIGJldHRlciBlcnJvciBoYW5kbGluZ1xuICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICBsZXQgcGFyc2VkQ29udGVudDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1JhdyBjb250ZW50OicsIGNvbnRlbnQpO1xuICAgICAgXG4gICAgICBjb25zdCBqc29uU3RyaW5nID0gY29udGVudC5yZXBsYWNlKC9eYGBganNvblxcbj98XFxuP2BgYCQvZywgJycpLnRyaW0oKTtcbiAgICAgIHBhcnNlZENvbnRlbnQgPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuXG4gICAgICBpZiAoIXBhcnNlZENvbnRlbnQudGl0bGUgfHwgIXBhcnNlZENvbnRlbnQuZGVzY3JpcHRpb24gfHwgIXBhcnNlZENvbnRlbnQuZW1vdGlvbmFsX2FuYWx5c2lzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBzdHJ1Y3R1cmUnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQYXJzaW5nIGVycm9yOicsIGUpO1xuICAgICAgcGFyc2VkQ29udGVudCA9IHtcbiAgICAgICAgdGl0bGU6IFwiSW1hZ2UgQW5hbHlzaXNcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVW5hYmxlIHRvIHByb2Nlc3MgZGVzY3JpcHRpb25cIixcbiAgICAgICAgZW1vdGlvbmFsX2FuYWx5c2lzOiBcIlVuYWJsZSB0byBwcm9jZXNzIGVtb3Rpb25hbCBhbmFseXNpc1wiLFxuICAgICAgICB0YWdzOiBbXVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzYWZlUmVzcG9uc2UgPSB7XG4gICAgICB0aXRsZTogcGFyc2VkQ29udGVudC50aXRsZSB8fCBcIlVudGl0bGVkXCIsXG4gICAgICBkZXNjcmlwdGlvbjogcGFyc2VkQ29udGVudC5kZXNjcmlwdGlvbiB8fCBcIk5vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZVwiLFxuICAgICAgZW1vdGlvbmFsX2FuYWx5c2lzOiBwYXJzZWRDb250ZW50LmVtb3Rpb25hbF9hbmFseXNpcyB8fCBcIk5vIGVtb3Rpb25hbCBhbmFseXNpcyBhdmFpbGFibGVcIixcbiAgICAgIHJlbGV2YW50X3F1b3RlOiBwYXJzZWRDb250ZW50LnJlbGV2YW50X3F1b3RlIHx8IFwiTm8gcmVsZXZhbnQgcXVvdGUgYXZhaWxhYmxlXCIsXG4gICAgICBmYXNoaW9uX2NvbW1lbnRhcnk6IHBhcnNlZENvbnRlbnQuZmFzaGlvbl9jb21tZW50YXJ5IHx8IFwiTm8gZmFzaGlvbiBjb21tZW50YXJ5IGF2YWlsYWJsZVwiLFxuICAgICAgYmVhdXR5X2FuYWx5c2lzOiBwYXJzZWRDb250ZW50LmJlYXV0eV9hbmFseXNpcyB8fCBudWxsLFxuICAgICAgcG9saXRpY2FsX2FuYWx5c2lzOiBwYXJzZWRDb250ZW50LnBvbGl0aWNhbF9hbmFseXNpcyB8fCBcIk5vIHBvbGl0aWNhbCBhbmFseXNpcyBhdmFpbGFibGVcIixcbiAgICAgIGZyYWdyYW5jZV9zdWdnZXN0aW9uOiBwYXJzZWRDb250ZW50LmZyYWdyYW5jZV9zdWdnZXN0aW9uIHx8IFwiTm8gZnJhZ3JhbmNlIHN1Z2dlc3Rpb24gYXZhaWxhYmxlXCIsXG4gICAgICBjb3NtZXRpY19zdWdnZXN0aW9uczogcGFyc2VkQ29udGVudC5jb3NtZXRpY19zdWdnZXN0aW9ucyB8fCBcIk5vIGNvc21ldGljIHN1Z2dlc3Rpb25zIGF2YWlsYWJsZVwiLFxuICAgICAgZXlld2Vhcl9zdWdnZXN0aW9uczogcGFyc2VkQ29udGVudC5leWV3ZWFyX3N1Z2dlc3Rpb25zIHx8IFwiTm8gZXlld2VhciBzdWdnZXN0aW9ucyBhdmFpbGFibGVcIixcbiAgICAgIHN5bWJvbGljX21lYW5pbmc6IHBhcnNlZENvbnRlbnQuc3ltYm9saWNfbWVhbmluZyB8fCBcIk5vIHN5bWJvbGljIGFuYWx5c2lzIGF2YWlsYWJsZVwiLFxuICAgICAgY3VsdHVyYWxfc2lnbmlmaWNhbmNlOiBwYXJzZWRDb250ZW50LmN1bHR1cmFsX3NpZ25pZmljYW5jZSB8fCBcIk5vIGN1bHR1cmFsIGFuYWx5c2lzIGF2YWlsYWJsZVwiLFxuICAgICAgcHN5Y2hvbG9naWNhbF9pbnNpZ2h0OiBwYXJzZWRDb250ZW50LnBzeWNob2xvZ2ljYWxfaW5zaWdodCB8fCBcIk5vIHBzeWNob2xvZ2ljYWwgaW5zaWdodCBhdmFpbGFibGVcIixcbiAgICAgIGFydGlzdGljX2VsZW1lbnRzOiBwYXJzZWRDb250ZW50LmFydGlzdGljX2VsZW1lbnRzIHx8IFwiTm8gYXJ0aXN0aWMgYW5hbHlzaXMgYXZhaWxhYmxlXCIsXG4gICAgICBoaXN0b3JpY2FsX2NvbnRleHQ6IHBhcnNlZENvbnRlbnQuaGlzdG9yaWNhbF9jb250ZXh0IHx8IFwiTm8gaGlzdG9yaWNhbCBjb250ZXh0IGF2YWlsYWJsZVwiLFxuICAgICAgaGFpcmN1dF9zdWdnZXN0aW9uOiBwYXJzZWRDb250ZW50LmhhaXJjdXRfc3VnZ2VzdGlvbiB8fCBcIk5vIGhhaXJjdXQgc3VnZ2VzdGlvbnMgYXZhaWxhYmxlXCIsXG4gICAgICBoYWlyX2NvbG9yX3N1Z2dlc3Rpb246IHBhcnNlZENvbnRlbnQuaGFpcl9jb2xvcl9zdWdnZXN0aW9uIHx8IFwiTm8gaGFpciBjb2xvciBzdWdnZXN0aW9ucyBhdmFpbGFibGVcIixcbiAgICAgIHdpbnRlcl93ZWFyX3N1Z2dlc3Rpb246IHBhcnNlZENvbnRlbnQud2ludGVyX3dlYXJfc3VnZ2VzdGlvbiB8fCBcIk5vIHdpbnRlciB3ZWFyIHN1Z2dlc3Rpb25zIGF2YWlsYWJsZVwiLFxuICAgICAgdGFnczogQXJyYXkuaXNBcnJheShwYXJzZWRDb250ZW50LnRhZ3MpID8gcGFyc2VkQ29udGVudC50YWdzIDogW10sXG4gICAgICBzdWdnZXN0ZWRfY2l0aWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBjaXR5OiBcIkt5b3RvLCBKYXBhblwiLFxuICAgICAgICAgIGNvbnRyaWJ1dGlvbjogXCJXaWxsIGVuaGFuY2UgeW91ciBhcHByZWNpYXRpb24gZm9yIG1pbmRmdWxuZXNzIGFuZCB0cmFkaXRpb25hbCBhZXN0aGV0aWNzXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNpdHk6IFwiQmFyY2Vsb25hLCBTcGFpblwiLFxuICAgICAgICAgIGNvbnRyaWJ1dGlvbjogXCJXaWxsIGF3YWtlbiB5b3VyIGNyZWF0aXZlIHNwaXJpdCB0aHJvdWdoIG1vZGVybmlzdCBhcmNoaXRlY3R1cmVcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgY2l0eTogXCJDb3BlbmhhZ2VuLCBEZW5tYXJrXCIsXG4gICAgICAgICAgY29udHJpYnV0aW9uOiBcIldpbGwgaW5zcGlyZSB5b3VyIHNlbnNlIG9mIGRlc2lnbiBhbmQgc3VzdGFpbmFibGUgbGl2aW5nXCJcbiAgICAgICAgfVxuICAgICAgXS5tYXAoY2l0eSA9PiBgJHtjaXR5LmNpdHl9OiAke2NpdHkuY29udHJpYnV0aW9ufWApLmpvaW4oJ1xcblxcbicpLFxuICAgICAgYnVzaW5lc3Nfb3Bwb3J0dW5pdHk6IHBhcnNlZENvbnRlbnQuYnVzaW5lc3Nfb3Bwb3J0dW5pdHkgfHwgXCJObyBidXNpbmVzcyBvcHBvcnR1bml0aWVzIGlkZW50aWZpZWRcIlxuICAgIH07XG5cbiAgICBjb25zdCBnZW5lcmF0ZVRhZ3MgPSAoY29udGVudCkgPT4ge1xuICAgICAgY29uc3QgYWxsVGV4dCA9IFtcbiAgICAgICAgY29udGVudC50aXRsZSxcbiAgICAgICAgY29udGVudC5kZXNjcmlwdGlvbixcbiAgICAgICAgY29udGVudC5lbW90aW9uYWxfYW5hbHlzaXMsXG4gICAgICAgIGNvbnRlbnQuZmFzaGlvbl9jb21tZW50YXJ5LFxuICAgICAgICBjb250ZW50LnN5bWJvbGljX21lYW5pbmcsXG4gICAgICAgIGNvbnRlbnQuY3VsdHVyYWxfc2lnbmlmaWNhbmNlLFxuICAgICAgICBjb250ZW50LnBzeWNob2xvZ2ljYWxfaW5zaWdodCxcbiAgICAgICAgY29udGVudC5hcnRpc3RpY19lbGVtZW50cyxcbiAgICAgICAgY29udGVudC5idXNpbmVzc19vcHBvcnR1bml0eVxuICAgICAgXS5qb2luKCcgJyk7XG5cbiAgICAgIC8vIEV4dHJhY3Qga2V5IHdvcmRzIGFuZCBwaHJhc2VzXG4gICAgICBjb25zdCB3b3JkcyA9IGFsbFRleHQudG9Mb3dlckNhc2UoKVxuICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csICcnKVxuICAgICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAzKSAvLyBGaWx0ZXIgb3V0IHNob3J0IHdvcmRzXG4gICAgICAgIC5maWx0ZXIoKHZhbHVlLCBpbmRleCwgc2VsZikgPT4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXgpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuXG4gICAgICAvLyBJZiB3ZSBoYXZlIHBhcnNlZCB0YWdzIGZyb20gdGhlIEFQSSwgaW5jbHVkZSB0aGVtIGZpcnN0XG4gICAgICBjb25zdCBleGlzdGluZ1RhZ3MgPSBBcnJheS5pc0FycmF5KGNvbnRlbnQudGFncykgPyBjb250ZW50LnRhZ3MgOiBbXTtcbiAgICAgIGNvbnN0IGNvbWJpbmVkVGFncyA9IFsuLi5leGlzdGluZ1RhZ3MsIC4uLndvcmRzXTtcbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IDE1IHVuaXF1ZSB0YWdzLCBwcmlvcml0aXppbmcgZXhpc3RpbmcgdGFnc1xuICAgICAgY29uc3QgZmluYWxUYWdzID0gY29tYmluZWRUYWdzXG4gICAgICAgIC5maWx0ZXIoKHZhbHVlLCBpbmRleCwgc2VsZikgPT4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXgpIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgIC5zbGljZSgwLCAxNSk7XG5cbiAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaGF2ZSAxNSB0YWdzXG4gICAgICB3aGlsZSAoZmluYWxUYWdzLmxlbmd0aCA8IDE1KSB7XG4gICAgICAgIGZpbmFsVGFncy5wdXNoKGBUYWcgJHtmaW5hbFRhZ3MubGVuZ3RoICsgMX1gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZpbmFsVGFncztcbiAgICB9O1xuXG4gICAgY29uc3QgdGFncyA9IGdlbmVyYXRlVGFncyhwYXJzZWRDb250ZW50KTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAuLi5zYWZlUmVzcG9uc2UsXG4gICAgICB0YWdzOiB0YWdzXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJGYWlsZWQgdG8gYW5hbHl6ZSBpbWFnZVwiLFxuICAgICAgdGFnczogW11cbiAgICB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiT3BlbkFJIiwibXVsdGVyIiwiZnMiLCJwYXRoIiwidXBsb2FkIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJmaWxlbmFtZSIsInJlcSIsImZpbGUiLCJjYiIsIkRhdGUiLCJub3ciLCJvcmlnaW5hbG5hbWUiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwidG1wRGlyIiwiam9pbiIsImN3ZCIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJoYW5kbGVyIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInVwbG9hZE1pZGRsZXdhcmUiLCJzaW5nbGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsImltYWdlQnVmZmVyIiwicmVhZEZpbGVTeW5jIiwiYmFzZTY0SW1hZ2UiLCJ0b1N0cmluZyIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsInRleHQiLCJpbWFnZV91cmwiLCJ1cmwiLCJtaW1ldHlwZSIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsInVubGlua1N5bmMiLCJjaG9pY2VzIiwibWVzc2FnZSIsInBhcnNlZENvbnRlbnQiLCJqc29uU3RyaW5nIiwicmVwbGFjZSIsInRyaW0iLCJKU09OIiwicGFyc2UiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZW1vdGlvbmFsX2FuYWx5c2lzIiwiRXJyb3IiLCJlIiwidGFncyIsInNhZmVSZXNwb25zZSIsInJlbGV2YW50X3F1b3RlIiwiZmFzaGlvbl9jb21tZW50YXJ5IiwiYmVhdXR5X2FuYWx5c2lzIiwicG9saXRpY2FsX2FuYWx5c2lzIiwiZnJhZ3JhbmNlX3N1Z2dlc3Rpb24iLCJjb3NtZXRpY19zdWdnZXN0aW9ucyIsImV5ZXdlYXJfc3VnZ2VzdGlvbnMiLCJzeW1ib2xpY19tZWFuaW5nIiwiY3VsdHVyYWxfc2lnbmlmaWNhbmNlIiwicHN5Y2hvbG9naWNhbF9pbnNpZ2h0IiwiYXJ0aXN0aWNfZWxlbWVudHMiLCJoaXN0b3JpY2FsX2NvbnRleHQiLCJoYWlyY3V0X3N1Z2dlc3Rpb24iLCJoYWlyX2NvbG9yX3N1Z2dlc3Rpb24iLCJ3aW50ZXJfd2Vhcl9zdWdnZXN0aW9uIiwiQXJyYXkiLCJpc0FycmF5Iiwic3VnZ2VzdGVkX2NpdGllcyIsImNpdHkiLCJjb250cmlidXRpb24iLCJtYXAiLCJidXNpbmVzc19vcHBvcnR1bml0eSIsImdlbmVyYXRlVGFncyIsImFsbFRleHQiLCJ3b3JkcyIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJmaWx0ZXIiLCJ3b3JkIiwibGVuZ3RoIiwidmFsdWUiLCJpbmRleCIsInNlbGYiLCJpbmRleE9mIiwiZXhpc3RpbmdUYWdzIiwiY29tYmluZWRUYWdzIiwiZmluYWxUYWdzIiwic2xpY2UiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/ai-code.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-code&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fai-code.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();